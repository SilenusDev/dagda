{
  "manifest": {
    "name": "babel-plugin-jsx-dom-expressions",
    "description": "A JSX to DOM plugin that wraps expressions for fine grained change detection",
    "version": "0.40.1",
    "author": {
      "name": "Ryan Carniato"
    },
    "license": "MIT",
    "repository": {
      "type": "git",
      "url": "https://github.com/ryansolid/dom-expressions/blob/main/packages/babel-plugin-jsx-dom-expressions"
    },
    "readmeFilename": "README.md",
    "main": "index.js",
    "sideEffects": false,
    "scripts": {
      "build": "rollup -c --bundleConfigAsCjs",
      "test": "pnpm run build && jest --no-cache",
      "test:coverage": "pnpm run build && jest --coverage --no-cache",
      "prepublishOnly": "pnpm run build",
      "prepare": "pnpm run build"
    },
    "dependencies": {
      "@babel/helper-module-imports": "7.18.6",
      "@babel/plugin-syntax-jsx": "^7.18.6",
      "@babel/types": "^7.20.7",
      "html-entities": "2.3.3",
      "parse5": "^7.1.2",
      "validate-html-nesting": "^1.2.1"
    },
    "peerDependencies": {
      "@babel/core": "^7.20.12"
    },
    "devDependencies": {
      "@babel/core": "^7.20.12",
      "@rollup/plugin-babel": "6.0.3",
      "@types/babel__core": "^7.20.5"
    },
    "gitHead": "f362e36d1ee2ff4d1ed9f2235ba5b9c174048be5",
    "_registry": "npm",
    "_loc": "/yarn-cache/v6/npm-babel-plugin-jsx-dom-expressions-0.40.1-f25685e25c85b1a3230db5347e6fa634610c1dc0-integrity/node_modules/babel-plugin-jsx-dom-expressions/package.json",
    "readme": "# Babel Plugin JSX DOM Expressions\n\n[![Build Status](https://github.com/ryansolid/dom-expressions/workflows/DOMExpressions%20CI/badge.svg)](https://github.com/ryansolid/dom-expressions/actions/workflows/main-ci.yml)\n[![NPM Version](https://img.shields.io/npm/v/babel-plugin-jsx-dom-expressions.svg?style=flat)](https://www.npmjs.com/package/babel-plugin-jsx-dom-expressions)\n![](https://img.shields.io/npm/dt/babel-plugin-jsx-dom-expressions.svg?style=flat)\n[![Gitter](https://img.shields.io/gitter/room/dom-expressions/community)](https://gitter.im/dom-expressions/community)\n\nThis package is a JSX compiler built for [DOM Expressions](https://github.com/ryansolid/dom-expressions) to provide a general JSX to DOM transformation for reactive libraries that do fine grained change detection. This package aims to convert JSX statements to native DOM statements and wrap JSX expressions with functions that can be implemented with the library of your choice. Sort of like a JSX to Hyperscript for fine change detection.\n\n## Features\n\nThis plugin treats all lowercase tags as html elements and mixed cased tags as Custom Functions. This enables breaking up your view into components. This library supports Web Component Custom Elements spec. Support for common camelcase event handlers like React, dom safe attributes like class and for, a simple ref property, and parsing of objects for style, and classList properties.\n\nIn general JSX Attribute Expressions are treated as attributes by default, with exception custom elements that will to properties and special fields like `class` and `style`. Plain string attributes will be treated as attributes.\n\nThis library uses a heuristic whether to dynamic wrap expressions based on if they contain function calls or property access. Simple literals and variable expressions won't be wrapped. If you ever want to ensure it is not wrapped you can start the expression with `/*@once*/` comment.\n\n## Example\n\n```jsx\nconst view = ({ item }) => {\n  const itemId = item.id;\n  return <tr class={itemId === selected() ? \"danger\" : \"\"}>\n    <td class=\"col-md-1\">{itemId}</td>\n    <td class=\"col-md-4\">\n      <a onclick={e => select(item, e)}>{item.label}</a>\n    </td>\n    <td class=\"col-md-1\">\n      <a onclick={e => del(item, e)}>\n        <span class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"></span>\n      </a>\n    </td>\n    <td class=\"col-md-6\"></td>\n  </tr>;\n};\n```\n\nCompiles to:\n\n```jsx\nimport { template as _$template } from \"dom\";\nimport { delegateEvents as _$delegateEvents } from \"dom\";\nimport { className as _$className } from \"dom\";\nimport { effect as _$effect } from \"dom\";\nimport { insert as _$insert } from \"dom\";\n\nconst _tmpl$ = /*#__PURE__*/_$template(`<tr><td class=\"col-md-1\"></td><td class=\"col-md-4\"><a></a></td><td class=\"col-md-1\"><a><span class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"></span></a></td><td class=\"col-md-6\"></td></tr>`, 16);\nconst view = ({\n  item\n}) => {\n  const itemId = item.id;\n  return (() => {\n    const _el$ = _tmpl$.cloneNode(true),\n      _el$2 = _el$.firstChild,\n      _el$3 = _el$2.nextSibling,\n      _el$4 = _el$3.firstChild,\n      _el$5 = _el$3.nextSibling,\n      _el$6 = _el$5.firstChild;\n    _$insert(_el$2, itemId);\n    _el$4.$$click = e => select(item, e);\n    _$insert(_el$4, () => item.label);\n    _el$6.$$click = e => del(item, e);\n    _$effect(() => _$className(_el$, itemId === selected() ? \"danger\" : \"\"));\n    return _el$;\n  })();\n};\n_$delegateEvents([\"click\"]);\n```\n\nThe use of cloneNode improves repeat insert performance and precompilation reduces the number of references to the minimal traversal path. This is a basic example which doesn't leverage event delegation or any of the more advanced features described below.\n\n## Example Implementations\n\n- [Solid](https://github.com/ryansolid/solid): A declarative JavaScript library for building user interfaces.\n- [ko-jsx](https://github.com/ryansolid/ko-jsx): Knockout JS with JSX rendering.\n- [mobx-jsx](https://github.com/ryansolid/mobx-jsx): Ever wondered how much more performant MobX is without React? A lot.\n\n## Plugin Options\n\n### moduleName\n\n- Type: `string`\n- Required: Yes\n\nThe name of the runtime module to import the methods from.\n\n### generate\n\n- Type: `'dom' | 'ssr'`\n- Default: `'dom'`\n\nThe output mode of the compiler. Can be \"dom\"(default), \"ssr\". \"dom\" is standard output. \"ssr\" is for server side rendering of strings.\n\n### hydratable\n\n- Type: `boolean`\n- Default: `false`\n\nIndicate whether the output should contain hydratable markers.\n\n### delegateEvents\n\n- Type: `boolean`\n- Default: `true`\n\nBoolean to indicate whether to enable automatic event delegation on camelCase.\n\n### wrapConditionals\n\n- Type: `boolean`\n- Default: `true`\n\nBoolean indicates whether smart conditional detection should be used. This optimizes simple boolean expressions and ternaries in JSX.\n\n### contextToCustomElements\n\n- Type: `boolean`\n- Default: `false`\n\nBoolean indicates whether to set current render context on Custom Elements and slots. Useful for seemless Context API with Web Components.\n\n### builtIns\n\n- Type: `boolean`\n- Default: `string[]`\n\nArray of Component exports from module, that aren't included by default with the library. This plugin will automatically import them if it comes across them in the JSX.\n\n### effectWrapper\n\n- Type: `string`\n- Default: `effect`\n\nThis plugin leverages a heuristic for reactive wrapping and lazy evaluation of JSX expressions. This option indicates the reactive wrapper function name (`effect`), defaults to `effect`.\n\n### staticMarker\n\n- Type: `string`\n- Default: `@once`\n\nComment decorator string indicates the static expression, used to tell the compiler not to wrap them by `effect` function, defaults to `@once`.\n\n### memoWrapper\n\n- Type: `string`\n- Default: `memo`\n\nMemos let you efficiently use a derived value in many reactive computations. This option indicates the memo function name, defaults to `memo`.\n\n### validate\n\n- Type: `boolean`\n- Default: `true`\n\nChecks for properly formed HTML by checking for elements that would not be allowed in certain parent elements. This validation isn't complete but includes places where browser would \"correct\" it and break the DOM walks.\n\n### omitNestedClosingTags\n\n- Type: `boolean`\n- Default: `false`\n\nRemoves unnecessary closing tags from the template output. This may not work in all browser-like environments the same. The solution has been tested again Chrome/Edge/Firefox/Safari.\n\n### omitLastClosingTag\n\n- Type: `boolean`\n- Default: `true`\n\nRemoves tags from the template output if they have no closing parents and are the last element. This may not work in all browser-like environments the same. The solution has been tested again Chrome/Edge/Firefox/Safari.\n\n### omitQuotes\n\n- Type: `boolean`\n- Default: `true`\n\nRemoves quotes for html attributes when possible from the template output. This may not work in all browser-like environments the same. The solution has been tested again Chrome/Edge/Firefox/Safari.\n\n### requireImportSource\n\n- Type: `string | false`\n- Default: `false`\n\nWhen set to a string value, this option restricts JSX transformation to only files that contain a specific JSX import source pragma comment. The plugin will only transform JSX in files that include a comment with `@jsxImportSource` followed by the specified value. If the comment is missing or specifies a different import source, the transformation is skipped for that file.\n\nExample usage:\n```jsx\n// In babel configuration:\n{\n  plugins: [\n    [\"jsx-dom-expressions\", {\n      requireImportSource: \"r-dom\"\n    }]\n  ]\n}\n\n// In your component file:\n/** @jsxImportSource r-dom */\nconst template = <div>Hello</div>;\n```\n\n## Special Binding\n\n### ref\n\nThis binding will assign the variable you pass to it with the DOM element or if a function will call it with the element.\n\n```jsx\nconst Child = props => <div ref={props.ref} />;\n\nconst Parent = () => {\n  let ref;\n  return <Child ref={ref} />;\n};\n```\n\n### on(eventName)\n\nThese will be treated as event handlers expecting a function. The compiler will delegate events where possible (Events that bubble or can be composed) else it will fall back to Level 1 spec \"on_____\" events.\n\nIf you wish to make it into a Bound Event, you can bind a value to your delegated event by passing an array handler instead and the second argument will be passed to your event handler as the first argument (the event will be second).\n\n```jsx\nfunction handler(itemId, e) {/*...*/}\n\n<ul>\n  {list().map(item => (\n    <li onClick={[handler, item.id]} />\n  ))}\n</ul>\n```\n\nThis delegation solution works with Web Components and the Shadow DOM as well if the events are composed. That limits the list to custom events and most UA UI events like onClick, onKeyUp, onKeyDown, onDblClick, onInput, onMouseDown, onMouseUp, etc..\nImportant:\n\n- To allow for casing to work all custom events should follow the all lowercase convention of native events. If you want to use different event convention (or use Level 3 Events \"addEventListener\") use the \"on\" binding.\n\n- Event delegates aren't cleaned up automatically off Document. If you will be completely unmounting the library and wish to remove the handlers from the current page use `clearDelegatedEvents`.\n\n### on:/oncapture:\n\nTo bypass event delegation and use normal Level 3 \"addEventListener\" events.\n\n```jsx\n<div on:Weird-Event={e => alert(e.detail)} />\n```\n\nTo use capture event:\n```jsx\n<div oncapture:Weird-Event={e => alert(e.detail)} />\n```\n\n### classList\n\nThis takes an object and assigns all the keys as classes which are truthy.\n\n```jsx\n<div classList={{ selected: isSelected(), editing: isEditing() }} />\n```\n\n### ... (spreads)\n\nSpreads let you pass multiple props at once:\n\n```jsx\n<div {...props} />\n```\n\nKeep in mind given the independent nature of binding updates there is no guarantee of order using spreads at this time. It's under consideration.\n\n## Components\n\nComponents are just Capital Cased tags. Instead of wrapping with computation dynamic props will just be getter accessors. \\* Remember property access triggers so don't destructure outside of computations unless you intend the content to be static.\n\n```jsx\nconst MyComp = props => {\n  const staticProp = props.other;\n  return (\n    <>\n      <div>{props.param}</div>\n      <div>{staticProp}</div>\n    </>\n  );\n};\n\n<MyComp param={dynamic()} other={static} />;\n```\n\nComponents may have children. This is available as props.children. It may be a node, a function, or a string, or an array of the aforementioned. Non-expression children like DOM nodes are set to evaluate lazily (upon access by default).\n\n## Fragments\n\nThis plugin also supports JSX Fragments with `<></>` notation. These will be compiled to arrays. The fragment syntax provides the convenience of being able to use the template syntax to wrap expressions.\n\n## Acknowledgements\n\nThe concept of using JSX to DOM instead of html strings and context based binding usually found in these libraries was inspired greatly by [Surplus](https://github.com/adamhaile/surplus).\n",
    "licenseText": "MIT License\n\nCopyright (c) 2018-2019 Ryan Carniato\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/babel-plugin-jsx-dom-expressions/-/babel-plugin-jsx-dom-expressions-0.40.1.tgz#f25685e25c85b1a3230db5347e6fa634610c1dc0",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/babel-plugin-jsx-dom-expressions/-/babel-plugin-jsx-dom-expressions-0.40.1.tgz",
    "hash": "f25685e25c85b1a3230db5347e6fa634610c1dc0",
    "integrity": "sha512-b4iHuirqK7RgaMzB2Lsl7MqrlDgQtVRSSazyrmx7wB3T759ggGjod5Rkok5MfHjQXhR7tRPmdwoeGPqBnW2KfA==",
    "registry": "npm",
    "packageName": "babel-plugin-jsx-dom-expressions",
    "cacheIntegrity": "sha512-b4iHuirqK7RgaMzB2Lsl7MqrlDgQtVRSSazyrmx7wB3T759ggGjod5Rkok5MfHjQXhR7tRPmdwoeGPqBnW2KfA== sha1-8laF4lyFsaMjDbU0fm+mNGEMHcA="
  },
  "registry": "npm",
  "hash": "f25685e25c85b1a3230db5347e6fa634610c1dc0"
}